<!-- 
<h1>Pages#welcome</h1>
<p>Find me in app/views/pages/welcome.html.erb</p>
 -->

<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<div id="full-width-background">
  <div class="row">
    <div class="small-1 med-1 large-1 columns">&nbsp;</div>
    <div id="card-container" class="small-10 med-8 large-8 columns">
      <h2 id="card-header"> <%= @fact.term %> </h2>
      <div id="answer-canvas" class=" ">
      </div>
      <div id="answer-basket">
          <% @words.each do |word| %>
            <div class="answer-object"><%= word %></div>
          <% end %>
      </div>
      <input id="submit" type="submit"></input>
    </div>
    <div class="small-1 med-1 large-1 columns">&nbsp;</div>
  </div>
</div>


<script type="text/javascript">
 
 var attemptArray = [];



$("#answer-canvas").on('click', ".answer-object",
  function(){
    var $this = $(this);
    $("#answer-basket").append(this);
    var delete_index = attemptArray.indexOf($this.text());
    attemptArray.splice(delete_index, 1);
  }
)


$("#answer-basket").on('click', ".answer-object",
  function(){
    var $this = $(this);
    $("#answer-canvas").append(this);
    attemptArray.push($this.text());
    console.log(check_answer(attemptArray));
    // var answer_correct = check_answer(attemptArray);
    if(check_answer(attemptArray)) {
      $(".answer-object").css("background-color", "#c2e2a0");
      $.ajax({
        type: "POST",
        data: true,
        url: "",
        success: function(){
          
          setTimeout(function(){
            loadNextCard();
          }, 2000);

        }
      }); 
    }
  }
)

var check_answer = function(attemptArray) {
  var joined_array = attemptArray.join("");
  // var normalized_response = joined_array.replace(" ", "");
  
  console.log("Joined array: "+joined_array);
  console.log("Fact: "+"<%= @fact.remove_spaces.html_safe %>");
  return joined_array == "<%= @fact.remove_spaces.html_safe %>";
}




</script>


<%= @fact.definition %>
<%= @words %>

















